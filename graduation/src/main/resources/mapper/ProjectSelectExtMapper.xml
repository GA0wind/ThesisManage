<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ncu.graduation.mapper.ProjectSelectExtMapper">
  <resultMap id="BaseResultMap" type="com.ncu.graduation.bo.MySelectStateBO">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue May 12 20:39:34 CST 2020.
    -->
    <result column="pno" jdbcType="VARCHAR" property="pno"/>
    <result column="pname" jdbcType="VARCHAR" property="pname"/>
    <result column="is_select" jdbcType="TINYINT" property="result"/>
    <result column="creator_No" jdbcType="VARCHAR" property="creatorNo"/>
    <result column="creator_Name" jdbcType="VARCHAR" property="creatorName"/>
  </resultMap>

  <resultMap id="MyProjectSelectStateBO" type="com.ncu.graduation.bo.MyProjectSelectStateBO">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue May 12 20:39:34 CST 2020.
    -->
    <result column="pno" jdbcType="VARCHAR" property="pno"/>
    <result column="is_select" jdbcType="TINYINT" property="result"/>
    <result column="select_no" jdbcType="VARCHAR" property="selectNo"/>
    <result column="select_name" jdbcType="VARCHAR" property="selectName"/>
  </resultMap>

  <select id="getMySelectStateByStu" resultMap="BaseResultMap">
    SELECT pa.pno AS pno,pa.pname AS pname, t.tno AS creator_no ,t.tname AS creator_name,ps.is_select AS is_select
    FROM project_select ps LEFT JOIN project_apply pa ON ps.pno = pa.pno LEFT JOIN teacher t ON pa.creator_no = t.tno
    WHERE ps.selector_no = #{selectorNo} AND pa.school_year = #{schoolYear}
    ORDER BY is_select DESC
  </select>

  <select id="getMySelectStateByTea" resultMap="BaseResultMap">
    SELECT pa.pno AS pno,pa.pname AS pname, s.sno AS creator_no ,s.sname AS creator_name,ps.is_select AS is_select
    FROM project_select ps LEFT JOIN project_apply pa ON ps.pno = pa.pno LEFT JOIN student s ON pa.creator_no = s.sno
    WHERE ps.selector_no = #{selectorNo} AND pa.school_year = #{schoolYear}
    ORDER BY is_select DESC
  </select>

  <select id="getMyProjectSelectStateByTea" resultMap="MyProjectSelectStateBO">
    SELECT ps.pno AS pno, s.sno AS select_no ,s.sname AS select_name,ps.is_select AS is_select
    FROM project_select ps LEFT JOIN student s ON ps.selector_no = s.sno
    WHERE ps.pno = #{pno}
    ORDER BY is_select DESC
  </select>

  <select id="getMyProjectSelectStateByStu" resultMap="MyProjectSelectStateBO">
    SELECT ps.pno AS pno, t.tno AS select_no ,t.tname AS select_name,ps.is_select AS is_select
    FROM project_select ps LEFT JOIN teacher t ON ps.selector_no = s.sno
    WHERE ps.pno = #{pno}
    ORDER BY is_select DESC
  </select>

</mapper>