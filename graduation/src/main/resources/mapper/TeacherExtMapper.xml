<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ncu.graduation.mapper.TeacherExtMapper">

  <resultMap id="TeacherTwotuple" type="com.ncu.graduation.util.BlindDistribution$TeacherTwotuple">
    <result column="tno" jdbcType="VARCHAR" property="tno" />
    <result column="lead_student_num" jdbcType="TINYINT" property="leadStudentNum" />
  </resultMap>
  <resultMap id="BaseResultMap" type="com.ncu.graduation.model.Teacher">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 15 11:32:06 CST 2020.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="tno" jdbcType="VARCHAR" property="tno" />
    <result column="tname" jdbcType="VARCHAR" property="tname" />
    <result column="password" jdbcType="VARCHAR" property="password" />
    <result column="college" jdbcType="VARCHAR" property="college" />
    <result column="role" jdbcType="VARCHAR" property="role" />
    <result column="title" jdbcType="VARCHAR" property="title" />
    <result column="lead_student_num" jdbcType="TINYINT" property="leadStudentNum" />
    <result column="group_num" jdbcType="INTEGER" property="groupNum" />
    <result column="group_role" jdbcType="VARCHAR" property="groupRole" />
    <result column="school_year" jdbcType="VARCHAR" property="schoolYear" />
    <result column="gmt_create" jdbcType="TIMESTAMP" property="gmtCreate" />
    <result column="gmt_modified" jdbcType="TIMESTAMP" property="gmtModified" />
  </resultMap>

  <select id="selectTnoAndStudentNum" resultMap="TeacherTwotuple">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 16 00:23:10 CST 2020.
    -->
    select tno,lead_student_num
    from teacher
    where role='teacher' and school_year like #{schoolYear} and college = #{college}
  </select>

  <select id="searchTeaList" resultMap="BaseResultMap">
    select * from teacher
    where school_year like #{schoolYear}
    <if test="userSearchDTO.userNo != null and userSearchDTO.userNo != ''">
      and tno like #{userSearchDTO.userNo,jdbcType=VARCHAR}
    </if>
    <if test="userSearchDTO.name != null and userSearchDTO.name != ''">
      and tname like #{userSearchDTO.name,jdbcType=VARCHAR}
    </if>
    <if test="userSearchDTO.college != null and userSearchDTO.college != ''">
      and college like #{userSearchDTO.college,jdbcType=VARCHAR}
    </if>
    <if test="userSearchDTO.role != null and userSearchDTO.role != ''">
      and role like #{userSearchDTO.role,jdbcType=VARCHAR}
    </if>

  </select>

  <update id="updateByTno" parameterType="com.ncu.graduation.model.Teacher">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 15 11:32:06 CST 2020.
    -->
    update teacher
    <set>
      <if test="tno != null">
        tno = #{tno,jdbcType=VARCHAR},
      </if>
      <if test="tname != null">
        tname = #{tname,jdbcType=VARCHAR},
      </if>
      <if test="password != null">
        password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="college != null">
        college = #{college,jdbcType=VARCHAR},
      </if>
      <if test="role != null">
        role = #{role,jdbcType=VARCHAR},
      </if>
      <if test="title != null">
        title = #{title,jdbcType=VARCHAR},
      </if>
      <if test="leadStudentNum != null">
        lead_student_num = #{leadStudentNum,jdbcType=TINYINT},
      </if>
      <if test="groupNum != null">
        group_num = #{groupNum,jdbcType=INTEGER},
      </if>
      <if test="groupRole != null">
        group_role = #{groupRole,jdbcType=VARCHAR},
      </if>
      <if test="schoolYear != null">
        school_year = concat(#{schoolYear,jdbcType=VARCHAR},school_year),
      </if>
      <if test="gmtCreate != null">
        gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="gmtModified != null">
        gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
      </if>
    </set>
    where tno = #{tno,jdbcType=VARCHAR}
  </update>


</mapper>