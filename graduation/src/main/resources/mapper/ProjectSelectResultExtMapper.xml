<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ncu.graduation.mapper.ProjectSelectResultExtMapper">
  <resultMap id="ProjectSelectResultBO" type="com.ncu.graduation.bo.ProjectSelectResultBO">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue May 12 20:39:34 CST 2020.
    -->
    <result column="pno" jdbcType="VARCHAR" property="pno"/>
    <result column="tno" jdbcType="VARCHAR" property="tno"/>
    <result column="sno" jdbcType="VARCHAR" property="sno"/>
    <result column="pname" jdbcType="VARCHAR" property="pname"/>
    <result column="tname" jdbcType="VARCHAR" property="tname"/>
    <result column="sname" jdbcType="VARCHAR" property="sname"/>
    <result column="college" jdbcType="VARCHAR" property="college"/>
  </resultMap>

  <select id="getProjectSelectResultByTea" resultMap="ProjectSelectResultBO">
    SELECT psr.pno AS pno,pa.pname AS pname, psr.tno AS tno, psr.sno AS sno, s.sname AS sname
    FROM project_select_result psr LEFT JOIN project_apply pa ON psr.pno = pa.pno LEFT JOIN student s ON psr.sno = s.sno
    WHERE psr.tno = #{tno} AND pa.school_year = #{schoolYear};
  </select>

  <select id="getProjectSelectResultByPnos" resultMap="ProjectSelectResultBO">
    SELECT psr.pno AS pno,pa.pname AS pname, psr.tno AS tno,t.tname AS tname, psr.sno AS sno, s.sname AS sname, pa.college AS college
    FROM project_select_result psr LEFT JOIN project_apply pa ON psr.pno = pa.pno
    LEFT JOIN student s ON psr.sno = s.sno LEFT JOIN teacher t ON t.tno = psr.tno
    WHERE psr.pno IN
    <foreach collection="pnos" index="index" item="pno" open="(" separator="," close=")">

      #{pno}

    </foreach>
    ORDER BY pa.college DESC;
  </select>

  <select id="getProjectSelectResultBySnos" resultMap="ProjectSelectResultBO">
    SELECT psr.pno AS pno,pa.pname AS pname, psr.tno AS tno,t.tname AS tname, psr.sno AS sno, s.sname AS sname, pa.college AS college
    FROM project_select_result psr LEFT JOIN project_apply pa ON psr.pno = pa.pno
    LEFT JOIN student s ON psr.sno = s.sno LEFT JOIN teacher t ON t.tno = psr.tno
    WHERE psr.sno IN
    <foreach collection="snos" index="index" item="sno" open="(" separator="," close=")">

      #{sno}

    </foreach>
  </select>
</mapper>